# WebsiteGraph

[![Python 3.8+](https://img.shields.io/badge/Python-3.8%2B-blue)](https://www.python.org/downloads/)
[![License](https://img.shields.io/badge/License-MIT-green)](#license)

Инструмент для анализа и визуализации структуры веб-сайтов в виде интерактивных графов. Позволяет исследовать связи между страницами, анализировать входящие ссылки и генерировать HTML-визуализации с поддержкой фильтров и настраиваемых параметров.

---

## Основные возможности

- **Глубокий анализ сайтов**Рекурсивный обход ссылок с настраиваемой глубиной (`max_depth`) и ограничением количества ссылок на страницу (`max_links`)
- **Интеллектуальная фильтрация**Поддержка регулярных выражений для путей (`path_regex`) и фильтрации по домену
- **Многопоточная обработка**Версия `WebsiteGraphMP` с поддержкой параллельных запросов для ускорения работы
- **Интерактивная визуализация**Генерация HTML-графов с:

  - Цветовой индикацией статусов HTTP-ответов
  - Размером узлов по степени связности
  - Возможностью экспорта в изображения
  - Подсветкой связей при наведении
- **Кэширование запросов**
  Уменьшение нагрузки на серверы за счет кэширования ответов

---

## Требования

```bash
pip install -r requirements.txt
```

---

## Использование

### Базовый пример

```python
from website_graph import WebsiteGraphMP

graph = WebsiteGraphMP(
    start_url="https://en.wikipedia.org/wiki/Data_science",
    max_depth=2,
    max_links=10,
    path_regex=r"^/wiki/[A-Za-z_]+$",
    workers=10
)
graph.crawl()
graph.visualize()
```

### Параметры

| Параметр | Описание                                                                                                            |
| ---------------- | --------------------------------------------------------------------------------------------------------------------------- |
| `start_url`    | Начальный URL для парсинга                                                                              |
| `max_depth`    | Максимальная глубина обхода ссылок                                                           |
| `max_links`    | Максимальное количество обрабатываемых ссылок на страницу               |
| `path_regex`   | Регулярное выражение для фильтрации путей (например,`r"^/wiki/.+$"`)         |
| `workers`      | Количество потоков для параллельной обработки (только для WebsiteGraphMP) |
| `expire_after` | Время жизни кэша (в секундах)                                                                        |

---

## Примеры визуализаций

| Глубина | Время выполнения | Ссылок обработано |
| -------------- | ------------------------------- | --------------------------------- |
| 1              | 1.18 сек                     | 10                                |
| 2              | 12.66 сек                    | 100+                              |
| 3              | 66.65 сек                    | 500+                              |

Генерируемые HTML-файлы сохраняются в папку `graphs/` с автоматической нумерацией.

---

## Архитектура проекта

1. **WebsiteGraph**Базовая версия с последовательной обработкой ссылок
2. **WebsiteGraphMP**Оптимизированная версия с:

   - Многопоточным парсингом (`ThreadPoolExecutor`)
   - Улучшенной обработкой ошибок
   - Поддержкой кэширования через `requests_cache`

---

## Лицензия

Этот проект распространяется под лицензией MIT. Подробности в файле LICENSE.txt
